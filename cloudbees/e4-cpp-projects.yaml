# EPICS V4 C++ Jenkins Jobs (aka job builder projects) on CloudBees
#
# Jenkins Job Builder configuration
#
# Author: Ralph Lange <ralph.lange@gmx.de>
# Copyright (C) 2016 ITER Organization.
# All rights reserved. Use is subject to license terms.

# EPICS V4 Modules

- project:
    name: pvCommonCPP
    repo: '{name}'
    module: pvCommon
    extra-description: ', with or without Micro-Benchmarks'
    microbench_axis:
        - WITH_MICROBENCH
        - NO_MICROBENCH
    jobs:
        - 'e4-cpp-{module}-master-lib-jobs':
            downstream: 'e4-cpp-pvAccess-master-build'

- project:
    name: pvDataCPP
    repo: '{name}'
    module: pvData
    jobs:
        - 'e4-cpp-{module}-master-lib-jobs':
            downstream: 'e4-cpp-pvAccess-master-build, e4-cpp-normativeTypes-master-build'

- project:
    name: pvAccessCPP
    repo: '{name}'
    module: pvAccess
    extra-description: ', with or without Micro-Benchmarks'
    microbench_axis:
        - WITH_MICROBENCH
        - NO_MICROBENCH
    jobs:
        - 'e4-cpp-{module}-master-lib-jobs':
            downstream: 'e4-cpp-pvaSrv-master-build, e4-cpp-pvaClient-master-build, e4-cpp-pvDatabase-master-build'

- project:
    name: normativeTypesCPP
    repo: '{name}'
    module: normativeTypes
    jobs:
        - 'e4-cpp-{module}-master-lib-jobs':
            downstream: 'e4-cpp-pvaClient-master-build'

- project:
    name: pvaClientCPP
    repo: '{name}'
    module: pvaClient
    jobs:
        - 'e4-cpp-{module}-master-lib-jobs':
            downstream: 'e4-cpp-example-master-build, e4-cpp-pvaPy-master-build'

- project:
    name: pvaPy
    repo: '{name}'
    module: '{name}'
    language: 'C++/Python'
    jobs:
        - 'e4-cpp-{module}-master-lib-jobs'

- project:
    name: pvaSrvCPP
    repo: pvaSrv
    module: pvaSrv
    jobs:
        - 'e4-cpp-{module}-master-lib-jobs':
            downstream: 'e4-cpp-example-master-build'

- project:
    name: pvDatabaseCPP
    repo: '{name}'
    module: pvDatabase
    jobs:
        - 'e4-cpp-{module}-master-lib-jobs':
            downstream: 'e4-cpp-example-master-build'

- project:
    name: exampleCPP
    repo: '{name}'
    module: example
    allow-no-artifact: true
    jobs:
        - 'e4-cpp-{module}-master-prod-jobs'
